<div class="liba-theme container">
  <h1>
    <i class="fas fa-vial"></i>
    | Gestión de Materiales Volumétricos
  </h1>

  <!-- Tarjetas de Dashboard -->
  <div class="dashboard-cards">
    <div class="action-card" (click)="toggleFormulario('material')" [class.active]="formularioActivo === 'material'">
      <i class="fas fa-flask"></i>
      <span>Registrar Material Volumétrico</span>
    </div>

    <div class="action-card" (click)="toggleFormulario('historial')" [class.active]="formularioActivo === 'historial'">
      <i class="fas fa-history"></i>
      <span>Registrar Historial</span>
    </div>

    <div class="action-card" (click)="toggleFormulario('intervalo')" [class.active]="formularioActivo === 'intervalo'">
      <i class="fas fa-calendar-alt"></i>
      <span>Registrar Intervalo</span>
    </div>
  </div>

  <!-- Formulario de Material Volumétrico -->
  <div *ngIf="formularioActivo === 'material'" class="form-section">
    <h2>
      <i class="fas fa-flask"></i>
      | Registrar Material Volumétrico
    </h2>
    <form class="form-grid" (submit)="crearMaterial($event)">
      <div>
        <label for="codigo_id">Código ID *</label>
        <input type="number" id="codigo_id" name="codigo_id" [(ngModel)]="codigo_id" required />
      </div>
      <div>
        <label for="nombre_material">Nombre del Material *</label>
        <input type="text" id="nombre_material" name="nombre_material" [(ngModel)]="nombre_material" required />
      </div>
      <div>
        <label for="volumen_nominal">Volumen Nominal *</label>
        <input type="number" step="0.001" id="volumen_nominal" name="volumen_nominal" [(ngModel)]="volumen_nominal" required />
      </div>
      <div>
        <label for="rango_volumen">Rango de Volumen</label>
        <input type="text" id="rango_volumen" name="rango_volumen" [(ngModel)]="rango_volumen" />
      </div>
      <div>
        <label for="marca">Marca</label>
        <input type="text" id="marca" name="marca" [(ngModel)]="marca" />
      </div>
      <div>
        <label for="modelo">Modelo</label>
        <input type="text" id="modelo" name="modelo" [(ngModel)]="modelo" />
      </div>
      <div>
        <label for="resolucion">Resolución</label>
        <input type="number" step="0.0001" id="resolucion" name="resolucion" [(ngModel)]="resolucion" />
      </div>
      <div>
        <label for="error_max_permitido">Error Máximo Permitido</label>
        <input type="number" step="0.0001" id="error_max_permitido" name="error_max_permitido" [(ngModel)]="error_max_permitido" />
      </div>
      <div class="actions" style="grid-column: 1 / -1;">
        <button type="button" (click)="resetFormMaterial()">Limpiar</button>
        <button type="submit">Registrar Material</button>
      </div>
    </form>
  </div>

  <!-- Formulario de Historial -->
  <div *ngIf="formularioActivo === 'historial'" class="form-section">
    <h2>
      <i class="fas fa-history"></i>
      | Registrar Historial Volumétrico
    </h2>
    <form class="form-grid" (submit)="crearHistorial($event)">
      <div>
        <label for="codigo_material_historial">Código del Material *</label>
        <input type="number" id="codigo_material_historial" name="codigo_material_historial" [(ngModel)]="codigo_material_historial" required />
      </div>
      <div>
        <label for="fecha_historial">Fecha *</label>
        <input type="date" id="fecha_historial" name="fecha_historial" [(ngModel)]="fecha_historial" required />
      </div>
      <div>
        <label for="tipo_historial_instrumento">Tipo de Historial</label>
        <input type="text" id="tipo_historial_instrumento" name="tipo_historial_instrumento" [(ngModel)]="tipo_historial_instrumento" />
      </div>
      <div>
        <label for="codigo_registro_historial">Código de Registro</label>
        <input type="text" id="codigo_registro_historial" name="codigo_registro_historial" [(ngModel)]="codigo_registro_historial" />
      </div>
      <div>
        <label for="realizo_historial">Realizó</label>
        <input type="text" id="realizo_historial" name="realizo_historial" [(ngModel)]="realizo_historial" />
      </div>
      <div>
        <label for="superviso_historial">Supervisó</label>
        <input type="text" id="superviso_historial" name="superviso_historial" [(ngModel)]="superviso_historial" />
      </div>
      <div class="actions" style="grid-column: 1 / -1;">
        <button type="button" (click)="resetFormHistorial()">Limpiar</button>
        <button type="submit">Registrar Historial</button>
      </div>
    </form>
  </div>

  <!-- Formulario de Intervalo -->
  <div *ngIf="formularioActivo === 'intervalo'" class="form-section">
    <h2>
      <i class="fas fa-calendar-alt"></i>
      | Registrar Intervalo Volumétrico
    </h2>
    <form class="form-grid" (submit)="crearIntervalo($event)">
      <div>
        <label for="codigo_material_intervalo">Código del Material *</label>
        <input type="number" id="codigo_material_intervalo" name="codigo_material_intervalo" [(ngModel)]="codigo_material_intervalo" required />
      </div>
      <div>
        <label for="valor_nominal">Valor Nominal *</label>
        <input type="number" step="0.001" id="valor_nominal" name="valor_nominal" [(ngModel)]="valor_nominal" required />
      </div>
      <div>
        <label for="fecha_c1">Fecha Calibración 1 *</label>
        <input type="date" id="fecha_c1" name="fecha_c1" [(ngModel)]="fecha_c1" required (change)="calcularCamposIntervalo()" />
      </div>
      <div>
        <label for="error_c1">Error Calibración 1 *</label>
        <input type="number" step="0.0001" id="error_c1" name="error_c1" [(ngModel)]="error_c1" required (change)="calcularCamposIntervalo()" />
      </div>
      <div>
        <label for="fecha_c2">Fecha Calibración 2 *</label>
        <input type="date" id="fecha_c2" name="fecha_c2" [(ngModel)]="fecha_c2" required (change)="calcularCamposIntervalo()" />
      </div>
      <div>
        <label for="error_c2">Error Calibración 2 *</label>
        <input type="number" step="0.0001" id="error_c2" name="error_c2" [(ngModel)]="error_c2" required (change)="calcularCamposIntervalo()" />
      </div>
      <div>
        <label for="tolerancia">Tolerancia</label>
        <input type="number" step="0.0001" id="tolerancia" name="tolerancia" [(ngModel)]="tolerancia" (change)="calcularCamposIntervalo()" />
      </div>
      <div>
        <label for="incertidumbre_exp">Incertidumbre Expandida</label>
        <input type="number" step="0.0001" id="incertidumbre_exp" name="incertidumbre_exp" [(ngModel)]="incertidumbre_exp" />
      </div>
      
      <!-- Campos calculados (readonly) -->
      <div>
        <label>Diferencia de Tiempo (días)</label>
        <input type="number" [value]="diferencia_tiempo_dias" readonly />
      </div>
      <div>
        <label>Desviación Absoluta</label>
        <input type="number" step="0.000001" [value]="desviacion_abs" readonly />
      </div>
      <div>
        <label>Deriva</label>
        <input type="number" step="0.00000001" [value]="deriva" readonly />
      </div>
      <div>
        <label>Intervalo Calibración (días)</label>
        <input type="number" step="0.01" [value]="intervalo_calibracion_dias" readonly />
      </div>
      <div>
        <label>Intervalo Calibración (años)</label>
        <input type="number" step="0.0001" [value]="intervalo_calibracion_anos" readonly />
      </div>
      
      <div class="actions" style="grid-column: 1 / -1;">
        <button type="button" (click)="resetFormIntervalo()">Limpiar</button>
        <button type="submit">Registrar Intervalo</button>
      </div>
    </form>
  </div>

  <!-- Lista de Materiales Registrados -->
  <div class="form-section">
    <h2>
      <i class="fas fa-list"></i>
      | Materiales Registrados
    </h2>

    <!-- Filtros de búsqueda -->
    <div class="filtros-section" style="margin-bottom: 1.5rem">
      <div class="form-grid">
        <div>
          <label for="filtroCodigo">Filtrar por Código</label>
          <input type="text" id="filtroCodigo" [(ngModel)]="filtroCodigo" placeholder="Buscar por código..." />
        </div>
        <div>
          <label for="filtroNombre">Filtrar por Nombre</label>
          <input type="text" id="filtroNombre" [(ngModel)]="filtroNombre" placeholder="Buscar por nombre..." />
        </div>
        <div>
          <label for="filtroMarca">Filtrar por Marca</label>
          <input type="text" id="filtroMarca" [(ngModel)]="filtroMarca" placeholder="Buscar por marca..." />
        </div>
        <div>
          <label for="filtroModelo">Filtrar por Modelo</label>
          <input type="text" id="filtroModelo" [(ngModel)]="filtroModelo" placeholder="Buscar por modelo..." />
        </div>
      </div>
      <div style="display: flex; justify-content: flex-end; margin-top: 1rem">
        <button type="button" (click)="limpiarFiltros()" style="background: #e5e7eb; color: #374151">
          <i class="fas fa-times"></i> Limpiar Filtros
        </button>
      </div>
    </div>

    <div *ngIf="cargandoMateriales" class="sin-materiales">
      <i class="fas fa-spinner fa-spin fa-2x"></i>
      <p>Cargando materiales...</p>
    </div>

    <div *ngIf="!cargandoMateriales && materialesFiltrados.length === 0" class="sin-materiales">
      <i class="fas fa-inbox fa-2x"></i>
      <p>No hay materiales volumétricos que coincidan con los filtros</p>
    </div>

    <div *ngIf="!cargandoMateriales && materialesFiltrados.length > 0" class="materiales-grid">
      <article *ngFor="let material of materialesFiltrados" class="material-card" (click)="toggleDetalleMaterial(material.codigo_id)">
        <div class="card-top">
          <div class="tags">
            <span class="tag"><strong>Código:</strong> {{ material.codigo_id }}</span>
            <span class="tag"><strong>Marca:</strong> {{ material.marca || '—' }}</span>
            <span class="tag"><strong>Modelo:</strong> {{ material.modelo || '—' }}</span>
            <span class="tag"><strong>Vol. Nominal:</strong> {{ material.volumen_nominal }}</span>
          </div>
          <div class="pdf-actions" (click)="$event.stopPropagation()">
            <button type="button" class="pdf-btn edit" title="Editar material" (click)="abrirEditarMaterial(material, $event)">
              <svg viewBox="0 0 24 24" class="icon">
                <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25z" fill="currentColor" />
                <path d="M20.71 7.04a1 1 0 0 0 0-1.41l-2.34-2.34a1 1 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" fill="currentColor" />
              </svg>
            </button>
            <button type="button" class="pdf-btn delete" title="Eliminar material" (click)="eliminarMaterial(material.codigo_id, $event)">
              <svg viewBox="0 0 24 24" class="icon">
                <path d="M6 6l12 12M6 18L18 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
              </svg>
            </button>
          </div>
        </div>
        <div class="card-name" [title]="material.nombre_material">
            <div class="name-line">{{ material.nombre_material }}</div>
            <div class="meta-line">
              <span class="chip">Resolución: {{ material.resolucion || '—' }}</span>
              <span class="chip">Error Máx: {{ material.error_max_permitido || '—' }}</span>
            </div>
            <div class="card-right-controls" (click)="$event.stopPropagation()">
              <div class="card-controls-inner">
                <div class="pdf-field">
                  <svg class="pdf-icon" viewBox="0 0 24 24" aria-hidden="true">
                    <rect x="3" y="2" width="18" height="20" rx="5" fill="#fff" stroke="#e5e7eb" stroke-width="1.6" />
                    <rect x="7" y="13.5" width="10" height="6" rx="3" fill="#ff3b30"/>
                    <text x="9" y="17.2" font-size="5.5" fill="#fff" font-weight="600">PDF</text>
                  </svg>

                  <select class="pdf-select" [(ngModel)]="selectedPdfByMaterial[material.codigo_id]" [class.placeholder]="!selectedPdfByMaterial[material.codigo_id]">
                    <option [ngValue]="null" disabled>Seleccionar PDF...</option>
                    <option *ngFor="let pdf of (pdfListByMaterial[material.codigo_id] || [])" [value]="pdf.id" [title]="pdf.name">{{ pdf.displayName || pdf.name }}</option>
                    <option *ngIf="!(pdfListByMaterial[material.codigo_id] || []).length" [ngValue]="null" disabled>Sin archivos</option>
                  </select>

                  <button class="btn view pdf-action" (click)="openPdf(material.codigo_id.toString(), $event)">Ver</button>
                  <button class="btn delete pdf-action eliminar" (click)="deletePdf(material.codigo_id.toString(), $event)">Eliminar</button>
                </div>

                <div class="compact-group">
                  <div class="pdf-icon-left" aria-hidden="true" title="PDF/Archivo">
                    <i class="fas fa-file-pdf"></i>
                  </div>
                  <details class="compact-dropdown">
                    <summary class="compact-action" title="Subir/gestionar PDF" (click)="$event.stopPropagation()">
                      <span class="action-leading">
                        <svg aria-hidden="true" height="14" viewBox="0 0 16 16" width="14" class="icon-plus">
                          <path d="M7.75 2a.75.75 0 0 1 .75.75V7h4.25a.75.75 0 0 1 0 1.5H8.5v4.25a.75.75 0 0 1-1.5 0V8.5H2.75a.75.75 0 0 1 0-1.5H7V2.75A.75.75 0 0 1 7.75 2Z"></path>
                        </svg>
                      </span>
                      <span class="action-label">
                        <svg aria-hidden="true" height="14" viewBox="0 0 16 16" width="14" class="icon-caret">
                          <path d="m4.427 7.427 3.396 3.396a.25.25 0 0 0 .354 0l3.396-3.396A.25.25 0 0 0 11.396 7H4.604a.25.25 0 0 0-.177.427Z"></path>
                        </svg>
                      </span>
                    </summary>
                    <ul class="compact-menu" role="menu" aria-label="Tipo de PDF">
                      <li role="menuitem" (click)="$event.stopPropagation(); iniciarUpload(material.codigo_id.toString(), 'Manual', $event)">Manual</li>
                      <li role="menuitem" (click)="$event.stopPropagation(); iniciarUpload(material.codigo_id.toString(), 'Certificado de calibración', $event)">Certificado de calibración</li>
                      <li role="menuitem" (click)="$event.stopPropagation(); iniciarUpload(material.codigo_id.toString(), 'Certificado de verificación', $event)">Certificado de verificación</li>
                      <li role="menuitem" (click)="$event.stopPropagation(); iniciarUpload(material.codigo_id.toString(), 'Ficha técnica', $event)">Ficha técnica</li>
                    </ul>
                  </details>
                </div>
              </div>
            </div>
        </div>
        <div *ngIf="materialExpandido === material.codigo_id" class="material-detalles">
          <div class="material-tabs-menu">
            <button type="button" class="tab-btn" 
                    [class.active]="activeTab[material.codigo_id] === 'historial'"
                    (click)="selectTab(material.codigo_id.toString(), 'historial'); $event.stopPropagation()">
              Historial
              <span class="tab-count" aria-hidden="true">{{ (historialPorMaterial[material.codigo_id] || []).length }}</span>
            </button>
            <button type="button" class="tab-btn" 
                    [class.active]="activeTab[material.codigo_id] === 'intervalo'"
                    (click)="selectTab(material.codigo_id.toString(), 'intervalo'); $event.stopPropagation()">
              Intervalo
              <span class="tab-count" aria-hidden="true">{{ (intervaloPorMaterial[material.codigo_id] || []).length }}</span>
            </button>
          </div>
          
          <div class="material-info-card" (click)="$event.stopPropagation()">
            <div class="material-info-card-header">
              <span class="material-info-card-title">Información del Material</span>
            </div>
            <div class="material-info-card-body">
              <!-- Historial Tab Content -->
              <div *ngIf="activeTab[material.codigo_id] === 'historial'">
                <div *ngIf="historialPorMaterial[material.codigo_id] && historialPorMaterial[material.codigo_id].length > 0; else noHistorial" class="records-container">
                  <div *ngFor="let registro of historialPorMaterial[material.codigo_id]" class="record-card">
                    <div class="record-header" (click)="toggleHistorialRegistro(material.codigo_id.toString(), registro.consecutivo)">
                      <span class="record-consecutivo">
                        <i class="fas" [ngClass]="historialExpandido[material.codigo_id + '_' + registro.consecutivo] ? 'fa-chevron-down' : 'fa-chevron-right'"></i>
                        Registro #{{ registro.consecutivo }}
                      </span>
                      <span>{{ registro.fecha ? (registro.fecha | date: 'yyyy/MM/dd') : 'N/A' }}</span>
                    </div>
                    <div class="record-body" *ngIf="historialExpandido[material.codigo_id + '_' + registro.consecutivo]">
                      <div *ngIf="registro._edit; else viewHistorial">
                        <div class="record-grid">
                          <div><label>Fecha</label><input type="date" [(ngModel)]="registro._edit.fecha" /></div>
                          <div><label>Tipo</label><input [(ngModel)]="registro._edit.tipo_historial_instrumento" /></div>
                          <div><label>Código Registro</label><input [(ngModel)]="registro._edit.codigo_registro" /></div>
                          <div><label>Realizó</label><input [(ngModel)]="registro._edit.realizo" /></div>
                          <div><label>Supervisó</label><input [(ngModel)]="registro._edit.superviso" /></div>
                        </div>
                        <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:8px">
                          <button type="button" (click)="saveHistorialEdits(material.codigo_id.toString(), registro)">Guardar</button>
                          <button type="button" (click)="cancelHistorialEdits(registro)">Cancelar</button>
                        </div>
                      </div>
                      <ng-template #viewHistorial>
                        <div class="record-grid">
                          <div class="record-item"><span class="record-label">Tipo:</span><span>{{ registro.tipo_historial_instrumento || 'N/A' }}</span></div>
                          <div class="record-item"><span class="record-label">Código Registro:</span><span>{{ registro.codigo_registro || 'N/A' }}</span></div>
                          <div class="record-item"><span class="record-label">Realizó:</span><span>{{ registro.realizo || 'N/A' }}</span></div>
                          <div class="record-item"><span class="record-label">Supervisó:</span><span>{{ registro.superviso || 'N/A' }}</span></div>
                        </div>
                        <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:8px">
                          <button type="button" (click)="startEditHistorial(registro)">Editar</button>
                        </div>
                      </ng-template>
                    </div>
                  </div>
                </div>
                <ng-template #noHistorial>
                  <p style="text-align:center;color:#6b7280;padding:1rem">No hay registros de historial</p>
                </ng-template>
              </div>

              <!-- Intervalo Tab Content -->
              <div *ngIf="activeTab[material.codigo_id] === 'intervalo'">
                <div *ngIf="intervaloPorMaterial[material.codigo_id] && intervaloPorMaterial[material.codigo_id].length > 0; else noIntervalo" class="records-container">
                  <div *ngFor="let registro of intervaloPorMaterial[material.codigo_id]" class="record-card">
                    <div class="record-header" (click)="toggleIntervaloRegistro(material.codigo_id.toString(), registro.consecutivo)">
                      <span class="record-consecutivo">
                        <i class="fas" [ngClass]="intervaloExpandido[material.codigo_id + '_' + registro.consecutivo] ? 'fa-chevron-down' : 'fa-chevron-right'"></i>
                        Registro #{{ registro.consecutivo }}
                      </span>
                      <span>Valor Nominal: {{ registro.valor_nominal }}</span>
                    </div>
                    <div class="record-body" *ngIf="intervaloExpandido[material.codigo_id + '_' + registro.consecutivo]">
                      <div *ngIf="registro._edit; else viewIntervalo">
                        <div class="record-grid">
                          <div><label>Valor Nominal</label><input type="number" step="0.001" [(ngModel)]="registro._edit.valor_nominal" /></div>
                          <div><label>Fecha Cal. 1</label><input type="date" [(ngModel)]="registro._edit.fecha_c1" /></div>
                          <div><label>Error Cal. 1</label><input type="number" step="0.0001" [(ngModel)]="registro._edit.error_c1" /></div>
                          <div><label>Fecha Cal. 2</label><input type="date" [(ngModel)]="registro._edit.fecha_c2" /></div>
                          <div><label>Error Cal. 2</label><input type="number" step="0.0001" [(ngModel)]="registro._edit.error_c2" /></div>
                          <div><label>Tolerancia</label><input type="number" step="0.0001" [(ngModel)]="registro._edit.tolerancia" /></div>
                          <div><label>Incertidumbre</label><input type="number" step="0.0001" [(ngModel)]="registro._edit.incertidumbre_exp" /></div>
                        </div>
                        <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:8px">
                          <button type="button" (click)="saveIntervaloEdits(material.codigo_id.toString(), registro)">Guardar</button>
                          <button type="button" (click)="cancelIntervaloEdits(registro)">Cancelar</button>
                        </div>
                      </div>
                      <ng-template #viewIntervalo>
                        <div class="record-grid">
                          <div class="record-item"><span class="record-label">Fecha Cal. 1:</span><span>{{ registro.fecha_c1 | date: 'yyyy/MM/dd' }}</span></div>
                          <div class="record-item"><span class="record-label">Error Cal. 1:</span><span>{{ registro.error_c1 }}</span></div>
                          <div class="record-item"><span class="record-label">Fecha Cal. 2:</span><span>{{ registro.fecha_c2 | date: 'yyyy/MM/dd' }}</span></div>
                          <div class="record-item"><span class="record-label">Error Cal. 2:</span><span>{{ registro.error_c2 }}</span></div>
                          <div class="record-item"><span class="record-label">Diferencia Días:</span><span>{{ registro.diferencia_tiempo_dias || 'N/A' }}</span></div>
                          <div class="record-item"><span class="record-label">Desviación Abs:</span><span>{{ registro.desviacion_abs || 'N/A' }}</span></div>
                          <div class="record-item"><span class="record-label">Deriva:</span><span>{{ registro.deriva || 'N/A' }}</span></div>
                          <div class="record-item"><span class="record-label">Tolerancia:</span><span>{{ registro.tolerancia || 'N/A' }}</span></div>
                          <div class="record-item"><span class="record-label">Intervalo (días):</span><span>{{ registro.intervalo_calibracion_dias || 'N/A' }}</span></div>
                          <div class="record-item"><span class="record-label">Intervalo (años):</span><span>{{ registro.intervalo_calibracion_anos || 'N/A' }}</span></div>
                        </div>
                        <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:8px">
                          <button type="button" (click)="startEditIntervalo(registro)">Editar</button>
                        </div>
                      </ng-template>
                    </div>
                  </div>
                </div>
                <ng-template #noIntervalo>
                  <p style="text-align:center;color:#6b7280;padding:1rem">No hay registros de intervalo</p>
                </ng-template>
              </div>
            </div>
          </div>
        </div>
      </article>
    </div>
  </div>

  <!-- Edit Modal -->
  <div *ngIf="editModalVisible || editModalClosing" class="modal-overlay" [class.closing]="editModalClosing" (click)="closeEditMaterialModal()">
    <div class="edit-modal" [class.closing]="editModalClosing" (click)="$event.stopPropagation()">
      <h3>Editar Material Volumétrico</h3>
      
      <div class="form-grid" style="margin-top: 1.5rem">
        <div>
          <label>Código ID</label>
          <input type="number" [(ngModel)]="codigo_id" readonly />
        </div>
        <div>
          <label>Nombre del Material</label>
          <input type="text" [(ngModel)]="nombre_material" />
        </div>
        <div>
          <label>Volumen Nominal</label>
          <input type="number" step="0.001" [(ngModel)]="volumen_nominal" />
        </div>
        <div>
          <label>Rango de Volumen</label>
          <input type="text" [(ngModel)]="rango_volumen" />
        </div>
        <div>
          <label>Marca</label>
          <input type="text" [(ngModel)]="marca" />
        </div>
        <div>
          <label>Modelo</label>
          <input type="text" [(ngModel)]="modelo" />
        </div>
        <div>
          <label>Resolución</label>
          <input type="number" step="0.0001" [(ngModel)]="resolucion" />
        </div>
        <div>
          <label>Error Máx. Permitido</label>
          <input type="number" step="0.0001" [(ngModel)]="error_max_permitido" />
        </div>
      </div>

      <div class="actions" style="margin-top: 1.5rem">
        <button type="button" (click)="closeEditMaterialModal()">Cancelar</button>
        <button type="button" (click)="saveAllEditMaterial()">Guardar Cambios</button>
      </div>
    </div>
  </div>
</div>
